<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>

<!-- Adapter factory contributions -->
   <extension point="org.eclipse.core.runtime.adapters">
      <factory
            adaptableType="org.eclipse.tcf.te.launch.ui.model.LaunchNode"
            class="org.eclipse.tcf.te.launch.ui.internal.adapters.AdapterFactory">
         <adapter type="org.eclipse.jface.viewers.ILabelProvider"/>
         <adapter type="org.eclipse.tcf.te.ui.views.interfaces.handler.IDeleteHandlerDelegate"/>
         <adapter type="org.eclipse.tcf.te.ui.views.interfaces.handler.IRefreshHandlerDelegate"/>
      </factory>
   </extension>

<!-- Property tester contributions -->
   <extension point="org.eclipse.core.expressions.propertyTesters">
      <propertyTester
            class="org.eclipse.tcf.te.launch.ui.internal.LaunchNodePropertyTester"
            id="org.eclipse.tcf.te.launch.ui.propertytester.launchNode"
            namespace="org.eclipse.tcf.te.launch.ui.model"
            properties="isLaunchConfig, isLaunchConfigType"
            type="org.eclipse.tcf.te.launch.ui.model.LaunchNode">
      </propertyTester>
   </extension>

<!-- Editor page contributions -->
   <extension point="org.eclipse.tcf.te.ui.views.editorPages">
      <editorPage
            class="org.eclipse.tcf.te.ui.views.editor.pages.TreeViewerExplorerEditorPage:org.eclipse.tcf.te.launch.ui.viewer.launches:Launches"
            name="%LauchEditorPage.name"
            id="org.eclipse.tcf.te.launch.ui.LaunchEditorPage">
      </editorPage>
   </extension>

<!-- Viewer contributions -->
   <extension point="org.eclipse.tcf.te.ui.viewers">
      <viewer
            id="org.eclipse.tcf.te.launch.ui.viewer.launches"
            autoExpandLevel="2"
            contentProvider="org.eclipse.tcf.te.launch.ui.internal.viewer.LaunchTreeContentProvider"
            helpId="org.eclipse.tcf.te.launch.ui.LaunchEditorPage"
            menuId="org.eclipse.tcf.te.launch.ui.menu.launches">
         <creation>
            <style name="SWT.FULL_SELECTION"/>
            <style name="SWT.SINGLE"/>
         </creation>
      </viewer>
      <columnContribution viewerId="org.eclipse.tcf.te.launch.ui.viewer.launches">
         <column
               id="launchConfigurations"
               labelProvider="org.eclipse.tcf.te.launch.ui.internal.viewer.LaunchTreeLabelProvider"
               name="%LauchEditorPage.column.name"
               width="400">
         </column>
      </columnContribution>
   </extension>

<!-- Launches menu contributions -->
   <extension point="org.eclipse.ui.menus">

   <!-- Target explorer launches menu contributions -->
      <menuContribution locationURI="popup:org.eclipse.tcf.te.ui.views.View#Popup?after=group.new">
         <menu 
               id="org.eclipse.tcf.te.ui.views.View.menu.new"
               label="%New.menu.name">
            <dynamic
                  id="org.eclipse.tcf.te.launch.ui.navigator.dynamic.new"
                  class="org.eclipse.tcf.te.launch.ui.internal.handler.NewLaunchConfigurationContributionItem">
               <visibleWhen>
                  <with variable="selection">
                     <count value="1"/>
                     <iterate
                           ifEmpty="false"
                           operator="and">
                        <or>
                           <test property="org.eclipse.tcf.te.launch.ui.model.isLaunchConfig"/>
                           <test property="org.eclipse.tcf.te.launch.ui.model.isLaunchConfigType"/>
                        </or>
                     </iterate>
                  </with>
               </visibleWhen>
            </dynamic>
         </menu>
      </menuContribution>
      <menuContribution locationURI="popup:org.eclipse.tcf.te.ui.views.View#Popup?after=group.launch">
         <dynamic
               id="org.eclipse.tcf.te.launch.ui.navigator.dynamic.launch"
               class="org.eclipse.tcf.te.launch.ui.internal.handler.LaunchLaunchConfigurationContributionItem">
            <visibleWhen>
               <with variable="selection">
                  <count value="1"/>
                  <iterate
                        ifEmpty="false"
                        operator="and">
                     <test property="org.eclipse.tcf.te.launch.ui.model.isLaunchConfig"/>
                  </iterate>
               </with>
            </visibleWhen>
         </dynamic>
      </menuContribution>
      <menuContribution locationURI="popup:org.eclipse.tcf.te.ui.views.View#Popup?after=group.edit">
         <menu 
               id="org.eclipse.tcf.te.launch.ui.navigator.menu.open"
               label="%Open.menu.name">
            <dynamic
                  id="org.eclipse.tcf.te.launch.ui.navigator.dynamic.open"
                  class="org.eclipse.tcf.te.launch.ui.internal.handler.OpenLaunchConfigurationContributionItem">
            </dynamic>
            <visibleWhen>
               <with variable="selection">
                  <count value="1"/>
                  <iterate
                        ifEmpty="false"
                        operator="and">
                     <test property="org.eclipse.tcf.te.launch.ui.model.isLaunchConfigType"/>
                  </iterate>
               </with>
            </visibleWhen>
         </menu>
         <menu 
               id="org.eclipse.tcf.te.launch.ui.navigator.menu.openAs"
               label="%OpenAs.menu.name">
            <dynamic
                  id="org.eclipse.tcf.te.launch.ui.navigator.dynamic.openAs"
                  class="org.eclipse.tcf.te.launch.ui.internal.handler.OpenLaunchConfigurationContributionItem">
            </dynamic>
            <visibleWhen>
               <with variable="selection">
                  <count value="1"/>
                  <iterate
                        ifEmpty="false"
                        operator="and">
                     <test property="org.eclipse.tcf.te.launch.ui.model.isLaunchConfig"/>
                  </iterate>
               </with>
            </visibleWhen>
         </menu>
      </menuContribution>

   <!-- Launches editor page menu contributions -->
      <menuContribution locationURI="popup:org.eclipse.tcf.te.launch.ui.menu.launches">
         <separator
               name="group.new"
               visible="true">
         </separator>
         <menu 
               id="org.eclipse.tcf.te.launch.ui.menu.new"
               label="%New.menu.name">
            <dynamic
                  id="org.eclipse.tcf.te.launch.ui.dynamic.new"
                  class="org.eclipse.tcf.te.launch.ui.internal.handler.NewLaunchConfigurationContributionItem">
               <visibleWhen>
                  <with variable="selection">
                     <count value="1"/>
                     <iterate
                           ifEmpty="false"
                           operator="and">
                        <or>
                           <test property="org.eclipse.tcf.te.launch.ui.model.isLaunchConfig"/>
                           <test property="org.eclipse.tcf.te.launch.ui.model.isLaunchConfigType"/>
                        </or>
                     </iterate>
                  </with>
               </visibleWhen>
            </dynamic>
         </menu>
         <separator
               name="group.showIn"
               visible="true">
         </separator>
         <menu
               id="org.eclipse.tcf.te.launch.ui.menu.showIn"
               label="%ShowIn.menu.name">
            <command
                  commandId="org.eclipse.tcf.te.ui.views.command.ShowInProperties"
                  icon="icons/eview16/prop_ps.gif" 
                  label="%Properties.menu.name"
                  style="push">
               <visibleWhen>
                  <with variable="selection">
                     <count value="1"/>
                     <iterate
                           ifEmpty="false"
                           operator="and">
                        <test property="org.eclipse.tcf.te.launch.ui.model.isLaunchConfig"/>
                     </iterate>
                  </with>
               </visibleWhen>
            </command>
            <visibleWhen checkEnabled="true"/>
         </menu>
         <separator
               name="group.launch"
               visible="true">
         </separator>
         <dynamic
               id="org.eclipse.tcf.te.launch.ui.dynamic.launch"
               class="org.eclipse.tcf.te.launch.ui.internal.handler.LaunchLaunchConfigurationContributionItem">
            <visibleWhen>
               <with variable="selection">
                  <count value="1"/>
                  <iterate
                        ifEmpty="false"
                        operator="and">
                     <test property="org.eclipse.tcf.te.launch.ui.model.isLaunchConfig"/>
                  </iterate>
               </with>
            </visibleWhen>
         </dynamic>
         <separator
               name="group.edit"
               visible="true">
         </separator>
         <menu 
               id="org.eclipse.tcf.te.launch.ui.menu.open"
               label="%Open.menu.name">
            <dynamic
                  id="org.eclipse.tcf.te.launch.ui.dynamic.open"
                  class="org.eclipse.tcf.te.launch.ui.internal.handler.OpenLaunchConfigurationContributionItem">
            </dynamic>
            <visibleWhen>
               <with variable="selection">
                  <count value="1"/>
                  <iterate
                        ifEmpty="false"
                        operator="and">
                     <test property="org.eclipse.tcf.te.launch.ui.model.isLaunchConfigType"/>
                  </iterate>
               </with>
            </visibleWhen>
         </menu>
         <menu 
               id="org.eclipse.tcf.te.launch.ui.menu.openAs"
               label="%OpenAs.menu.name">
            <dynamic
                  id="org.eclipse.tcf.te.launch.ui.dynamic.openAs"
                  class="org.eclipse.tcf.te.launch.ui.internal.handler.OpenLaunchConfigurationContributionItem">
            </dynamic>
            <visibleWhen>
               <with variable="selection">
                  <count value="1"/>
                  <iterate
                        ifEmpty="false"
                        operator="and">
                     <test property="org.eclipse.tcf.te.launch.ui.model.isLaunchConfig"/>
                  </iterate>
               </with>
            </visibleWhen>
         </menu>
         <separator
               name="group.delete"
               visible="true">
         </separator>
         <command
               commandId="org.eclipse.ui.edit.delete"
               id="org.eclipse.tcf.te.launch.ui.commands.delete"
               label="%Delete.menu.name"
               mnemonic="%Delete.menu.mnemonic"
               style="push">
            <visibleWhen checkEnabled="false">
               <with variable="selection">
                  <count value="1"/>
                  <iterate
                        ifEmpty="false"
                        operator="and">
                     <test property="org.eclipse.tcf.te.ui.views.isDeletableElement"/>
                  </iterate>
               </with>
            </visibleWhen>
         </command>
         <separator
               name="group.refresh"
               visible="true">
         </separator>
         <command
               commandId="org.eclipse.tcf.te.ui.command.refresh"
               id="org.eclipse.tcf.te.launch.ui.commands.refresh"
               label="%Refresh.menu.name"
               mnemonic="%Refresh.menu.mnemonic"
               style="push">
            <visibleWhen checkEnabled="false">
               <with variable="selection">
                  <count value="1"/>
                  <iterate
                        ifEmpty="false"
                        operator="and">
                     <test property="org.eclipse.tcf.te.ui.views.isRefreshableElement"/>
                  </iterate>
               </with>
            </visibleWhen>
         </command>
      </menuContribution>
   </extension>

<!-- Command contributions -->
   <extension point="org.eclipse.ui.commands">
      <command
            categoryId="org.eclipse.tcf.te.ui.commands.category"
            description="%command.showInDebugView.description"
            helpContextId="org.eclipse.tcf.te.launch.command_ShowInDebugView"
            id="org.eclipse.tcf.te.launch.command.showInDebugView"
            name="%command.showInDebugView.name"/>
      <command
            categoryId="org.eclipse.tcf.te.ui.commands.category"
            description="%command.attach.description"
            helpContextId="org.eclipse.tcf.te.launch.command_Attach"
            id="org.eclipse.tcf.te.launch.command.attach"
            name="%command.attach.name"/>
      <command
            categoryId="org.eclipse.tcf.te.ui.commands.category"
            description="%command.detach.description"
            helpContextId="org.eclipse.tcf.te.launch.command_Detach"
            id="org.eclipse.tcf.te.launch.command.detach"
            name="%command.detach.name"/>
   </extension>
   
<!-- Command image contributions -->
   <extension point="org.eclipse.ui.commandImages">
      <image
            commandId="org.eclipse.tcf.te.launch.command.showInDebugView"
            icon="platform:/plugin/org.eclipse.debug.ui/icons/full/eview16/debug_view.gif"/>
      <image
            commandId="org.eclipse.tcf.te.launch.command.attach"
            disabledIcon="icons/dlcl16/attach.gif"
            icon="icons/elcl16/attach.gif"/>
      <image
            commandId="org.eclipse.tcf.te.launch.command.detach"
            disabledIcon="icons/dlcl16/detach.gif"
            icon="icons/elcl16/detach.gif"/>
   </extension>

<!-- Handler contributions -->
   <extension point="org.eclipse.ui.handlers">
      <handler
            class="org.eclipse.tcf.te.ui.views.handler.ShowInPropertiesHandler"
            commandId="org.eclipse.tcf.te.ui.views.command.ShowInProperties">
         <activeWhen>
            <with variable="activePartId">
               <equals value="org.eclipse.tcf.te.ui.views.Editor"/>
            </with>
         </activeWhen>
      </handler>
   </extension>

<!-- Property tab contributions -->
   <extension point="org.eclipse.ui.views.properties.tabbed.propertyTabs">
      <propertyTabs contributorId="org.eclipse.tcf.te.ui">
         <propertyTab
               id="org.eclipse.tcf.te.launch.ui.propertytab.refprojects"
               label="%ReferencedProjects.propertyTab.name"
               category="org.eclipse.tcf.te"/>
         <propertyTab
               id="org.eclipse.tcf.te.launch.ui.propertytab.filetransfers"
               label="%FileTransfers.propertyTab.name"
               category="org.eclipse.tcf.te"/>
         <propertyTab
               id="org.eclipse.tcf.te.launch.ui.propertytab.general"
               label="%General.propertyTab.name"
               category="org.eclipse.tcf.te"/>
      </propertyTabs>
   </extension>
   
<!-- Property section contributions -->
   <extension point="org.eclipse.ui.views.properties.tabbed.propertySections">
      <propertySections contributorId="org.eclipse.tcf.te.ui">
         <propertySection
               id="org.eclipse.tcf.te.launch.ui.launchconfigtype"
               class="org.eclipse.tcf.te.launch.ui.internal.properties.LaunchConfigTypePropertiesSection"
               enablesFor="1"
               filter="org.eclipse.tcf.te.launch.ui.internal.properties.LaunchConfigTypeFilter"
               tab="org.eclipse.tcf.te.launch.ui.propertytab.general"/>
         <propertySection
               id="org.eclipse.tcf.te.launch.ui.launchcontext"
               class="org.eclipse.tcf.te.launch.ui.internal.properties.LaunchContextPropertiesSection"
               enablesFor="1"
               filter="org.eclipse.tcf.te.launch.ui.internal.properties.LaunchContextFilter"
               tab="org.eclipse.tcf.te.launch.ui.propertytab.general"/>
         <propertySection
               id="org.eclipse.tcf.te.launch.ui.propertysection.refprojetcs"
               class="org.eclipse.tcf.te.launch.ui.internal.properties.RefProjectsPropertiesSection"
               enablesFor="1"
               filter="org.eclipse.tcf.te.launch.ui.internal.properties.RefProjectsFilter"
               tab="org.eclipse.tcf.te.launch.ui.propertytab.refprojects"/>
         <propertySection
               id="org.eclipse.tcf.te.launch.ui.propertysection.filetransfers"
               class="org.eclipse.tcf.te.launch.ui.internal.properties.FileTransferPropertiesSection"
               enablesFor="1"
               filter="org.eclipse.tcf.te.launch.ui.internal.properties.FileTransferFilter"
               tab="org.eclipse.tcf.te.launch.ui.propertytab.filetransfers"/>
      </propertySections>
   </extension>
</plugin>
